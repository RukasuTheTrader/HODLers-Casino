<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Spiel</title>
    <style>
        #gameArea, #playerArea, #hostArea, #results {
            display: none;
        }
        #playerArea, #hostArea {
            margin-top: 20px;
        }
        #results {
            margin-top: 40px;
            font-size: 20px;
            color: red;
        }
    </style>
</head>
<body>
    <div>
        <label for="gameSelector">Spiel auswählen:</label>
        <select id="gameSelector">
            <option value="1">Spiel 1</option>
        </select>
    </div>
    <button onclick="loadGame(document.getElementById('gameSelector').value)">Spiel laden</button>
    <div id="gameArea">
        <label for="bet">Einsatz:</label>
        <input type="number" id="bet" min="1" max="100" value="1">
        <span id="betAmount">1 Jack</span>
        <button onclick="startGame()">Spiel starten</button>
    </div>
    <div id="playerArea">
        <button id="rollButton" onclick="rollDice()" disabled>Würfeln</button>
        <button id="holdButton" onclick="hold()" disabled>Halten</button>
        <div>Spieler Punkte: <span id="playerScore">0</span></div>
    </div>
    <div id="hostArea">
        <div>Gastgeber Punkte: <span id="hostScore">0</span></div>
    </div>
    <div id="results"></div>
    <div id="jackAmount"></div>
    <script>
        let jackAmount = 1000;
        let playerScore = 0;
        let hostScore = 0;
        let gameActive = false;

        document.getElementById('bet').addEventListener('input', function (e) {
            document.getElementById('betAmount').textContent = e.target.value + ' Jack';
        });

        function loadGame(gameId) {
            document.getElementById('gameArea').removeAttribute('hidden');
            gameActive = true;
            resetGame();
        }

        function startGame() {
            if(gameActive) {
                document.getElementById('playerArea').removeAttribute('hidden');
                document.getElementById('rollButton').removeAttribute('disabled');
                document.getElementById('holdButton').removeAttribute('disabled');
                resetGame();
            }
        }

        function rollDice() {
            if(gameActive) {
                const roll = Math.floor(Math.random() * 6) + 1;
                playerScore += roll;
                document.getElementById('playerScore').textContent = playerScore;
                if (playerScore >= 21) endGame();
            }
        }

        function hold() {
            if(gameActive) {
                document.getElementById('hostArea').removeAttribute('hidden');
                while(hostScore < playerScore && hostScore < 21) {
                    const roll = Math.floor(Math.random() * 6) + 1;
                    hostScore += roll;
                    document.getElementById('hostScore').textContent = hostScore;
                }
                endGame();
            }
        }

        function endGame() {
            gameActive = false;
            let bet = parseInt(document.getElementById('bet').value);
            let results = document.getElementById('results');
            if (playerScore > 21 || (hostScore <= 21 && hostScore >= playerScore)) {
                jackAmount -= bet;
                results.textContent = 'You lose!';
            } else {
                jackAmount += bet;
                results.textContent = 'You win!';
            }
            document.getElementById('jackAmount').textContent = jackAmount;
            results.removeAttribute('hidden');
        }

        function resetGame() {
            playerScore = 0;
            hostScore = 0;
            document.getElementById('playerScore').textContent = '0';
            document.getElementById('hostScore').textContent = '0';
        }
    </script>
</body>
</html>
